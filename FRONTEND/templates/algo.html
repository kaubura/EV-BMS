
{% extends 'index.html' %}
{% block content %}
<div class="container-fluid sticky-top bg-dark bg-light-radial shadow-sm px-5 pe-lg-0">
    <nav class="navbar navbar-expand-lg bg-dark bg-light-radial navbar-dark py-3 py-lg-0">
        <a href="index.html" class="navbar-brand">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav ms-auto py-0">
                <a href="{{url_for('viewdata')}}" class="nav-item nav-link ">VIEWDATA</a>
                <a href="{{url_for('algo')}}" class="nav-item nav-link active">MODEL EVALUATION</a>
                <a href="{{url_for('prediction1')}}" class="nav-item nav-link">STATE OF BATTERY HEALTH</a>
                <a href="{{url_for('prediction2')}}" class="nav-item nav-link">PREDICTING STATE OF CHARGE BATTERY</a>
                <a href="{{url_for('index')}}" class="nav-item nav-link">LOGOUT</a>
                </div>
            </div>
        </div>
    </nav>
{% endblock %}
{% block a %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algorithm Performance</title>
    <style>
        body {
            background-color: #f0f8ff;
            font-family: Arial, sans-serif;
            color: #333;
        }
        .container {
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }
        h1 {
            text-align: center;
            color: #007acc;
        }
        .dropdown {
            margin-bottom: 20px;
        }
        .result {
            margin-top: 20px;
            font-size: 1.2em;
            color: #007acc;
            text-align: center;
        }
        .image-container {
            text-align: center;
            margin-top: 20px;
        }
        .image-container img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
        }
    </style>
</head>
<body style="background: url('/static/img/kaziranga-campus.jpg') no-repeat center center fixed; repeat: linear-gradient(135deg, #0f2027, #203a43, #2c5364); background-attachment: fixed; background-size: cover;">

<body>
    <div>
    <div class="container">
        <h1>Select Algorithm</h1>
        <form method="POST">
            <div class="mb-3">
                <label for="algorithm" class="form-label">Choose an algorithm:</label>
                <select name="algorithm" id="algorithm" class="form-select" required>
                    <option value="" disabled selected>Select an option</option>
                    {% for algorithm in algorithms %}
                        <option value="{{ algorithm }}" {% if selected_algorithm == algorithm %} selected {% endif %}>{{ algorithm }}</option>
                    {% endfor %}
                </select>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
        
{% if r2_score_value %}
<div class="result">
    <p><strong>R² Score</strong> for {{ selected_algorithm }}: {{ r2_score_value }}</p>
    <p><strong>Mean Squared Error (MSE):</strong> {{ mse_value }}</p>
    <p id="mape"><strong>Mean Absolute Percentage Error (MAPE):</strong> {{ (mae_value * 100)|round(2) }}%</p>
</div>
{% endif %}
<div>
    {% if selected_algorithm %}
  <h3 class="mt-4 text-primary">Performance Metrics: {{ selected_algorithm }}</h3>
  <ul class="list-group mb-4">
    <li class="list-group-item"><strong>R² Score:</strong> {{ r2_score_value }}</li>
    <li class="list-group-item"><strong>Mean Squared Error (MSE):</strong> {{ mse_value }}</li>
    <li class="list-group-item"><strong>Mean Absolute Error (MAE):</strong> {{ mae_value }}</li>
  </ul>

  <h4 class="text-success">Training Data: Actual vs Predicted</h4>
  <table class="table table-striped table-sm">
    <thead><tr><th>Actual</th><th>Predicted</th></tr></thead>
    <tbody>
      {% for actual, predicted in train_comparison %}
        <tr><td>{{ actual | round(2) }}</td><td>{{ predicted | round(2) }}</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <h4 class="text-info">Testing Data: Actual vs Predicted</h4>
  <table class="table table-striped table-sm">
    <thead><tr><th>Actual</th><th>Predicted</th></tr></thead>
    <tbody>
      {% for actual, predicted in test_comparison %}
        <tr><td>{{ actual | round(2) }}</td><td>{{ predicted | round(2) }}</td></tr>
      {% endfor %}
    </tbody>
  </table>
{% endif %}
{% if chart_file %}
  <h4 class="mt-4 text-center">Visual Comparison: Actual vs Predicted</h4>
  <div class="text-center">
    <img src="{{ url_for('static', filename='images/' + selected_algorithm + '_comparison.png') }}" 
         alt="Comparison Chart" 
         class="img-fluid rounded shadow" style="max-width: 700px;" />
  </div>
{% endif %}
</div>
    </div>

</body>
</html>
{% endblock %}


